development: true
config:
  dsn: "" # leave this empty

  serve:
    public:
      base_url: http://127.0.0.1:4433/
      cors:
        enabled: true
        allowed_origins:
        - http://localhost:4455
    admin:
      base_url: http://kratos:4434/

  secrets:
    default:
      - ld7/4Vlv0pbH6vQKvDIMKYjwkxj1EkoF
      - B0TbysVJCPPvip3+bwPrlLmWX9h1X9+1
    cookie:
      - PNp0lyY0GxPt5Ye3ezsx7t8IK8C62i+E
    cipher:
      - i6uHvxda/bqD7yzFPyrusIjYWxX130A5
  # session:
  #   cookie:
  #     same_site: Lax
  identity:
    default_schema_id: default
    schemas:
      - id: default
        url: file:///etc/config/identity.default.schema.json
  courier:
    smtp:
      connection_uri: smtps://test:test@mailslurper:1025/?skip_ssl_verify=true
  selfservice:
    default_browser_return_url: http://127.0.0.1:4455/welcome
    flows:
      login:
        ui_url: http://127.0.0.1:4455/auth/login

      registration:
        ui_url: http://127.0.0.1:4455/auth/registration

      settings:
        ui_url: http://127.0.0.1:4455/settings

      error:
        ui_url: http://127.0.0.1:4455/error

      recovery:
        enabled: true
        ui_url: http://127.0.0.1:4455/auth/recovery

automigration:
  enabled: true
identitySchemas:
  "identity.default.schema.json": |
    {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "$id": "https://schemas.ory.sh/presets/kratos/identity.phone.schema.json",
      "title": "Person",
      "type": "object",
      "properties": {
        "traits": {
          "type": "object",
          "properties": {
            "phone": {
              "type": "string",
              "format": "tel",
              "title": "Phone number",
              "ory.sh/kratos": {
                "credentials": {
                  "password": {
                    "identifier": true
                  },
                  "code": {
                    "identifier": true,
                    "via": "sms"
                  }
                },
                "recovery": {
                  "via": "sms"
                },
                "verification": {
                  "via": "sms"
                }
              },
              "maxLength": 320
            }
          },
          "required": ["phone"],
          "additionalProperties": false
        }
      }
    }